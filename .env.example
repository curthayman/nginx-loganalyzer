# Nginx Log Analyzer - Docker Compose Environment Variables
# Copy this file to .env and configure with your values

# =============================================================================
# REQUIRED SETTINGS
# =============================================================================

# Hostname for Traefik routing (REQUIRED)
# Example: logs.example.com or nginx-analyzer.yourdomain.com
HOSTNAME=logs.example.com

# =============================================================================
# DOCKER IMAGE CONFIGURATION
# =============================================================================

# Docker Compose Profile (Choose one)
# Options:
#   - dockerhub: Pull from public DockerHub (default)
#   - ecr: Pull from private AWS ECR repository
COMPOSE_PROFILES=dockerhub

# DockerHub Configuration (when COMPOSE_PROFILES=dockerhub)
DOCKERHUB_IMAGE=curthayman/nginx-loganalyzer
DOCKERHUB_TAG=latest

# AWS ECR Configuration (when COMPOSE_PROFILES=ecr)
# Format: {account-id}.dkr.ecr.{region}.amazonaws.com
# Example: 123456789012.dkr.ecr.us-east-1.amazonaws.com
# Note: You must authenticate Docker with ECR before running docker compose:
#   aws ecr get-login-password --region {region} | docker login --username AWS --password-stdin {ECR_REGISTRY}
ECR_REGISTRY=
ECR_IMAGE=nginx-loganalyzer
ECR_TAG=latest

# =============================================================================
# OPTIONAL SETTINGS
# =============================================================================

# Traefik Certificate Resolver
# This should match your Traefik configuration
# Default: letsencrypt
CERT_RESOLVER=letsencrypt

# SSH Key Path
# Path to SSH keys for SFTP access to Pantheon servers
# Default: ~/.ssh (your user's SSH directory)
SSH_KEY_PATH=~/.ssh

# Logs Directory
# Where to store downloaded site logs
# Default: ./site-logs (relative to docker-compose.yml)
LOGS_DIR=./site-logs

# =============================================================================
# PANTHEON CONFIGURATION
# =============================================================================

# Pantheon Machine Token (REQUIRED for Terminus CLI)
# Generate at: https://dashboard.pantheon.io/users/#account/tokens
# This token is used to authenticate with Pantheon's API
MACHINE_TOKEN=your_machine_token_here

# =============================================================================
# SECURITY (OPTIONAL)
# =============================================================================

# Basic Authentication (uncomment to enable)
# Generate users with: echo $(htpasswd -nb username password) | sed -e s/\\$/\\$\\$/g
# Example: BASIC_AUTH_USERS=admin:$$apr1$$xyz123$$abc...
# BASIC_AUTH_USERS=

# =============================================================================
# RESOURCE LIMITS (OPTIONAL)
# =============================================================================

# Adjust these in docker-compose.yml if needed
# CPU_LIMIT=2
# MEMORY_LIMIT=2G
# CPU_RESERVATION=0.5
# MEMORY_RESERVATION=512M

# =============================================================================
# NOTES
# =============================================================================
#
# 1. Hostname Configuration:
#    - Must match a DNS record pointing to your server
#    - Traefik will automatically obtain SSL certificates
#    - Example: logs.example.com â†’ your-server-ip
#
# 2. SSH Keys:
#    - Required for connecting to Pantheon SFTP servers
#    - Must include private key (id_rsa, id_ed25519, etc.)
#    - Keys should be mounted read-only for security
#
# 3. Logs Directory:
#    - Will be created automatically if it doesn't exist
#    - Stores logs downloaded from Pantheon servers
#    - Can be mounted on a larger volume if needed
#
# 4. Traefik Network:
#    - The 'proxy' network must already exist
#    - Create with: docker network create proxy
#    - Must be the same network Traefik is using
#
# 5. Docker Image Registry:
#    - Set COMPOSE_PROFILES=dockerhub to use public DockerHub images (default)
#    - Set COMPOSE_PROFILES=ecr to use private AWS ECR repository
#    - For ECR: Set ECR_REGISTRY to your full ECR registry URL
#      Example: 123456789012.dkr.ecr.us-east-1.amazonaws.com
#    - For ECR: You must authenticate Docker with ECR before running docker compose:
#      aws ecr get-login-password --region us-east-1 | docker login --username AWS --password-stdin {ECR_REGISTRY}
#    - Alternatively, use --profile flag:
#      docker compose --profile dockerhub up -d
#      docker compose --profile ecr up -d
#
# 6. Machine Token:
#    - Required for Pantheon Terminus CLI authentication
#    - Generate at: https://dashboard.pantheon.io/users/#account/tokens
#    - Create a new token with appropriate permissions
#    - Without this, log collection from Pantheon won't work
#
# 7. Basic Auth:
#    - Optional password protection for the application
#    - Generate password hash with htpasswd command
#    - Remember to escape $ symbols by doubling them ($$)
#
